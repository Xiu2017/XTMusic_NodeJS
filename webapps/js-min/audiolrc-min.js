var nolrc=$("#nolrc");var lrctime=new Array();var liarray=new Array();var playing=null;var slogan=null;var songlrc="";var geci="rgb(223,59,59)";var setDelayTime=0;var num=0;var minsize=14;var maxsize=14;$(function(){document.onclick=function(){window.parent.$("#selecttime,#selectmode").css("display","none")};document.onkeydown=function spacePlay(event){var e=event||window.event||arguments.callee.caller.arguments[0];if(e&&e.keyCode==32){window.parent.play_pause();e.preventDefault()}};window.onresize=function(){positionLrc()};$(".delrc").mouseover(function(){window.parent.openlrc(0)});$(".de1").click(function(){delrc(-0.2)});$(".de2").click(function(){delrc(0.2)})});var lyricList=new Vue({el:"#audiolrc",data:{lyricData:{}}});function parseLyric(){nolrc.text("");lrctime=[];lyricList.lyricData=new Array();if(!songlrc){return}let lyric=songlrc.split('\r\n');for(var i=0;i<lyric.length;i++){var d=lyric[i].match(/\[\d{2}:\d{2}((\.|\:)\d{2})\]/g);var t=lyric[i].split(d);t=$.trim(t[1]);if(d!=null){var dt=String(d).split(':');var _t=parseInt(dt[0].split('[')[1])*60+parseFloat(dt[1].split(']')[0]);lrctime[i]=Math.round(_t*100)/100;lyricList.lyricData.push(t)}}positionLrc();playlrc()}function positionLrc(){if(lrctime.length>0){setTimeout(function(){liarray=new Array();liarray[0]=parseInt($("ul li:eq(0)").get(0).offsetHeight);for(var i=1;i<=lrctime.length-1;i++){liarray[i]=liarray[i-1]+parseInt($("ul li:eq("+i+")").get(0).offsetHeight)}},500)}}function playlrc(jump){var audio=window.parent[0].$("#audio")[0];$("html,body").stop(true);clearInterval(playing);clearTimeout(slogan);if(jump==1){$("ul li:eq("+num+")").stop(true);$("ul li:eq("+(num-1)+")").stop(true);$("ul li").removeAttr("style");num=0;while(audio.currentTime>=(lrctime[num+1]+setDelayTime-0.2)){num++}if(num==0){document.body.scrollTop=0;document.documentElement.scrollTop=0}else{$("ul li:eq("+num+")").css('fontSize',maxsize+"px");$("ul li:eq("+(num-1)+")").css('fontSize',minsize+"px")}}else{document.body.scrollTop=0;document.documentElement.scrollTop=0;num=0}playing=setInterval(function(){if(!songlrc){clearInterval(playing);if(nolrc.text()=="找不到歌词"){clearplay()}return}if(audio.currentTime&&audio.currentTime>=(lrctime[num]+setDelayTime-0.2)){if(window.parent.isShow==1){$("html,body").animate({"scrollTop":liarray[num]+10+(num/3)},200)}else{$("html,body").animate({"scrollTop":liarray[num]+40+(num/6)},200)}$("ul li:eq("+num+")").animate({fontSize:maxsize+"px"},200);$("#li"+num).css("color",geci);if(num!=0){$("ul li:eq("+(num-1)+")").animate({fontSize:minsize+"px"},200);$("#li"+(num-1)).css("color","#666666")}num++}},10)}function clearplay(){$("html,body").stop(true);clearInterval(playing);clearTimeout(slogan);document.body.scrollTop=0;document.documentElement.scrollTop=0;nolrc.text("找不到歌词");lrctime=[];lyricList.lyricData=new Array();$("ul li").removeAttr("style");slogan=setTimeout(function(){nolrc.text("炫听音乐，炫酷生活")},5000)}function showdelrc(num){if(num){$('.delrc').css('display','block')}else{$('.delrc').css('display','none')}}function delrc(denum){if(songlrc){setDelayTime+=denum;$(".delrctime").text(-Math.round(setDelayTime*10)/10);playlrc(1)}}